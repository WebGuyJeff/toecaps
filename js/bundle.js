(()=>{"use strict";gsap.registerPlugin(ScrollTrigger);const e=[...document.querySelectorAll("button.accordian_title")],t={bindEvents:()=>e.forEach((e=>e.addEventListener("click",(function(){t.toggleAria(this)})))),toggleAria:e=>{e.setAttribute("aria-expanded","true"===e.getAttribute("aria-expanded")?"false":"true"),e.setAttribute("aria-pressed","true"===e.getAttribute("aria-pressed")?"false":"true"),e.nextElementSibling.click()},initialise:()=>{const e=setInterval((function(){"complete"===document.readyState&&(clearInterval(e),t.bindEvents())}),100)}},o=document.querySelectorAll(".dropdown-hover"),n=[];o.forEach((e=>{n.push(e.parentElement)}));const r=[...new Set(n)];let l=!1;const s={initDropdowns:function(){document.addEventListener("click",s.pageClickHandler),[...document.querySelectorAll(".dropdown-hover")].forEach((e=>{s.registerHover(e)})),r.forEach((e=>{e.addEventListener("click",s.menuClickHandler),e.addEventListener("mousedown",(()=>{l=!0})),e.addEventListener("mouseup",(()=>{l=!1}))}))},initialise:()=>{let e=setInterval((function(){"complete"===document.readyState&&(clearInterval(e),s.initDropdowns())}),100)},isInLeftHalf:function(e){const t=e.getBoundingClientRect(),o=window.innerWidth;return t.left<=o/2},scrollIntoView:function(e){const t=e.getBoundingClientRect(),o=document.body.getBoundingClientRect(),n=window.innerHeight;if(!(t.bottom>n))return!1;{const e=t.bottom-n;window.scrollBy(0,e),t.bottom>o.bottom&&(document.body.style.height=document.documentElement.scrollHeight+e+"px")}},pageClickHandler:function(e){let t=!1;if(r.forEach((o=>{1==!!o.contains(e.target)&&(t=!0)})),t)return;const o=[];document.querySelectorAll(".dropdown-hover").forEach((e=>{e.contains(e.querySelector(".dropdown_toggle-active"))&&o.push(e)})),[...o].forEach((e=>{1==!!e.closest('[data-hover-lock="true"]')&&e.closest(".dropdown-hover").setAttribute("data-hover-lock","false"),s.close(e.querySelector(".dropdown_toggle"))}))},hoverHandler:function(e){const t=e.target.closest(".dropdown-hover").getElementsByClassName("dropdown_toggle")[0];if("mouseenter"===e.type)s.open(t);else if("mouseleave"===e.type&&(l=!1,0==!!t.closest('[data-hover-lock="true"]')&&t.classList.contains("dropdown_toggle-active"))){let e;const o=t=>{e=t.target};document.addEventListener("mouseover",o,!1),setTimeout((()=>{t.parentElement.contains(e)||s.close(t),document.removeEventListener("mouseover",o,!1)}),10)}},focusHandler:function(e){if(l)return;const t=e.target.closest(".dropdown").getElementsByClassName("dropdown_toggle")[0];"focusin"===e.type?s.open(t):"focusout"===e.type&&0==!!t.closest('[data-hover-lock="true"]')&&t.classList.contains("dropdown_toggle-active")&&(0==!!e.target.closest(".dropdown-hover").contains(e.relatedTarget)?s.close(e.target.closest(".dropdown-hover").querySelector(".dropdown_toggle")):s.close(t))},registerHover:function(e){0==!!e.closest(".fullscreenMenu")&&(e.addEventListener("mouseenter",s.hoverHandler),e.addEventListener("mouseleave",s.hoverHandler),e.setAttribute("data-hover-listener","true")),e.addEventListener("focusin",s.focusHandler),e.addEventListener("focusout",s.focusHandler)},deregisterHover:function(e){e.removeEventListener("mouseenter",s.hoverHandler),e.removeEventListener("mouseleave",s.hoverHandler),e.setAttribute("data-hover-listener","false")},menuClickHandler:function(e){if(1==!!e.target.closest(".dropdown_toggle")||1==!!e.target.closest(".dropdown_primary")){const t=e.target.closest(".dropdown").querySelector(".dropdown_toggle");t.classList.contains("dropdown_toggle-active")&&0==!!t.closest('[data-hover-lock="true"]')?t.closest(".dropdown-hover").setAttribute("data-hover-lock","true"):t.classList.contains("dropdown_toggle-active")&&1==!!t.closest('[data-hover-lock="true"]')?(t.parentElement.classList.contains("dropdown-hover")&&t.closest(".dropdown-hover").setAttribute("data-hover-lock","false"),s.close(t)):(t.closest(".dropdown-hover").setAttribute("data-hover-lock","true"),s.open(t))}else 0==!!e.target.closest('[data-hover-lock="true"]')&&1==!!e.target.closest(".dropdown-hover")&&e.target.closest(".dropdown-hover").setAttribute("data-hover-lock","true")},open:function(e){const t=e.parentElement;t.classList.contains("dropdown-hover")&&(window.innerWidth<=1024&&s.isInLeftHalf(t)?(t.classList.add("dropdown-swingRight"),t.classList.remove("dropdown-swingLeft")):(t.classList.add("dropdown-swingLeft"),t.classList.remove("dropdown-swingRight"))),[...document.querySelectorAll(".dropdown_toggle-active")].forEach((t=>{t.parentElement.contains(e)||s.close(t)}));const o=[];if([...document.querySelectorAll(".dropdown-hover:not( .fullscreenMenu .dropdown )")].forEach((e=>{e.contains(e.querySelector(".dropdown_toggle-active"))&&o.push(e)})),[...o].forEach((e=>{e.contains(t)||(e.setAttribute("data-hover-lock","false"),s.close(e.querySelector(".dropdown_toggle")))})),0==!!e.parentElement.classList.contains("dropdown-hover")&&0==!!e.classList.contains("dropdown_toggle-active")){const e=[],o=[...t.closest(".dropdown-hover").querySelectorAll(".dropdown")];o.unshift(t.closest(".dropdown-hover")),o.pop(),o.forEach((o=>{if(o.contains(t)){e.push(o);const t=o.querySelector(".dropdown_toggle");t.classList.add("dropdown_toggle-active"),t.setAttribute("aria-expanded",!0),t.setAttribute("aria-pressed",!0)}}))}e.classList.add("dropdown_toggle-active"),e.setAttribute("aria-expanded",!0),e.setAttribute("aria-pressed",!0);let n=t.lastElementChild;s.scrollIntoView(n)},close:function(e){let t=e.parentElement.querySelectorAll(".dropdown_toggle-active");if(t.length>1)for(let e=t.length-1;e>=0;e--)t[e].classList.remove("dropdown_toggle-active"),t[e].setAttribute("aria-expanded",!1),t[e].setAttribute("aria-pressed",!1);else e.classList.remove("dropdown_toggle-active"),e.setAttribute("aria-expanded",!1),e.setAttribute("aria-pressed",!1)}};(()=>{let e=setInterval((function(){"complete"===document.readyState&&(clearInterval(e),[...document.querySelectorAll(".parallax")].forEach((e=>{const t=e.querySelector(".parallax_inner"),o=e.closest(".parallax_trigger"),n=t.clientHeight;gsap.to(t,{y:n/2,z:.01,ease:"none",scrollTrigger:{trigger:o,scrub:!0,start:"top top",end:"bottom top"}})})))}),100)})(),t.initialise(),(()=>{const e=document.querySelector("#fullscreenMenu_toggle");const t=()=>{let t=window.setTimeout((()=>{if(parseInt(document.querySelector("html").getBoundingClientRect().width,10)>=768&&e.checked)return window.clearTimeout(t),void e.click()}),250)},o=()=>{const e=window.innerWidth,t=document.querySelector("html").getBoundingClientRect().width;return parseInt(e-t,10)+"px"};let n=setInterval((function(){"complete"===document.readyState&&(clearInterval(n),e.addEventListener("change",(function(){this.checked?function(){if(null!==document.getElementById("js_psuedoScrollBar"))document.getElementById("js_psuedoScrollBar").style.display="block";else{let e=document.createElement("div");e.setAttribute("id","js_psuedoScrollBar"),e.style.position="fixed",e.style.right="0",e.style.top="0",e.style.width=o(),e.style.height="100vh",e.style.background="#333",e.style.zIndex="9",document.body.appendChild(e)}document.querySelector("body").style.overflow="hidden";const e=o();document.querySelector("html").style.paddingRight=e,window.addEventListener("resize",t)}():(null!==document.getElementById("js_psuedoScrollBar")&&(document.getElementById("js_psuedoScrollBar").style.display="none",document.querySelector("body").style.overflow="auto",document.querySelector("html").style.paddingRight="0"),window.removeEventListener("resize",t))})),[document.querySelector(".fullscreenMenu_open"),document.querySelector(".fullscreenMenu_close")].forEach((e=>{e.addEventListener("click",(()=>{document.getElementById("fullscreenMenu_toggle").click()}))})))}),100)})(),(()=>{const e=document.querySelector(".search_button");let t=setInterval((function(){"complete"===document.readyState&&(clearInterval(t),e.addEventListener("click",(()=>{document.querySelector(".search_toggle").click()})))}),100)})(),(()=>{let e=setInterval((function(){"complete"===document.readyState&&(clearInterval(e),[...document.querySelectorAll(".button:not( button )")].forEach((e=>{e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key&&"Spacebar"!==e.key||(e.target.click(),e.preventDefault())}))})))}),100)})(),s.initialise(),(()=>{const e=".navBar nav",t=document.querySelector(".autoMoreTemplate"),o="dropdown-hover",n="dropdown-inMenu";let r=!1,l=[];const c=document.querySelectorAll(e);if(0===c.length)return;c.forEach((e=>{l.push(e.parentElement)}));const d=e=>{e.classList.contains(n)?e.classList.replace(n,o):e.classList.contains(o)&&e.classList.replace(o,n)},i=()=>{l.forEach((t=>{const o=t.querySelector(e),n=o.querySelector(".autoMore"),r=n.querySelector(".autoMore > .dropdown_contents");a(t,o,n,r)}))},a=(e,t,r,l)=>{let c=(e=>{const t=e.clientWidth,o=window.getComputedStyle(e);return t-(parseInt(o.getPropertyValue("padding-left"),10)+parseInt(o.getPropertyValue("padding-right"),10))})(e),i=t.offsetWidth;if(i<=0)return;const a=parseInt(window.getComputedStyle(t).getPropertyValue("gap"),10);if(window.innerWidth>=768){if(i>c){let e;for(;i>c;){let o=t.children.length-2;for(e=t.children[o];e.classList.contains("autoMore");)o--,e=t.children[o];l.prepend(e),i=t.offsetWidth,d(e),e.classList.contains(n)&&(console.log("HELLO"),s.deregisterHover(e))}}else if(l.children.length>0){let e=l.firstElementChild,n=e.offsetWidth,u=i+n+a;for(;u<c&&l.children.length>0;)t.insertBefore(e,r),d(e),e.classList.contains(o)&&s.registerHover(e),e=l.firstElementChild,n=e.offsetWidth,i=t.offsetWidth,u=i+n+a}l.childElementCount>0?(r.style.position="relative",r.style.visibility="visible"):(r.style.position="absolute",r.style.visibility="hidden")}};let u;window.onresize=function(){clearTimeout(u),r&&(u=setTimeout(i,30))};let p=setInterval((function(){"complete"===document.readyState&&(clearInterval(p),r||(r=!0,l.forEach((o=>{const n=t.content.cloneNode(!0),r=o.querySelector(e);r.appendChild(n);const l=r.querySelector(".autoMore");s.registerHover(l),l.firstElementChild.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key&&"Spacebar"!==e.key||(e.target.click(),e.preventDefault())}))})),i()))}),1)})()})();